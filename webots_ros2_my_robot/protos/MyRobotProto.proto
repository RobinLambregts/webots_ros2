#VRML_SIM R2023b utf8

PROTO MyRobotProto [
  field SFVec3f    translation     0 0.05 0
  field SFRotation rotation        1 0 0 1.5708
  field SFString   name            "my_robot"
  field SFString   controller      "my_robot_driver"
  field SFFloat    wheelRadius     0.04
  field SFFloat    wheelWidth      0.02
  field SFVec3f    bodySize        0.15 0.05 0.2  # X=breedte, Y=hoogte, Z=lengte
]
{
  Robot {
    translation IS translation
    rotation IS rotation
    name IS name
    controller IS controller

    children [
      # Chassis (Lichaam van de robot)
      Shape {
        appearance PBRAppearance {
          baseColor 0.1 0.4 0.8
          roughness 0.5
        }
        geometry Box { size IS bodySize }
      }

      # Voorwiel Links (Front-Left)
      HingeJoint {
        jointParameters HingeJointParameters {
          axis 1 0 0                      # Rotatie-as langs de X-as (voorwaartse rol)
          anchor -0.09 0 -0.07            # Positie t.o.v. het midden
        }
        device [ RotationalMotor { name "fl_motor" } ]
        endPoint Solid {
          translation -0.09 0 -0.07
          rotation 0 0 1 1.5708           # Draai het wiel zelf zodat de platte kant op de as zit
          children [ DEF WHEEL_SHAPE Shape {
            appearance PBRAppearance { baseColor 0.1 0.1 0.1 }
            geometry Cylinder { radius IS wheelRadius height IS wheelWidth }
          } ]
          boundingObject USE WHEEL_SHAPE
          physics Physics { }
        }
      }

      # Voorwiel Rechts (Front-Right)
      HingeJoint {
        jointParameters HingeJointParameters {
          axis 1 0 0
          anchor 0.09 0 -0.07
        }
        device [ RotationalMotor { name "fr_motor" } ]
        endPoint Solid {
          translation 0.09 0 -0.07
          rotation 0 0 1 1.5708
          children [ USE WHEEL_SHAPE ]
          boundingObject USE WHEEL_SHAPE
          physics Physics { }
        }
      }

      # Achterwiel Links (Rear-Left)
      HingeJoint {
        jointParameters HingeJointParameters {
          axis 1 0 0
          anchor -0.09 0 0.07
        }
        device [ RotationalMotor { name "rl_motor" } ]
        endPoint Solid {
          translation -0.09 0 0.07
          rotation 0 0 1 1.5708
          children [ USE WHEEL_SHAPE ]
          boundingObject USE WHEEL_SHAPE
          physics Physics { }
        }
      }

      # Achterwiel Rechts (Rear-Right)
      HingeJoint {
        jointParameters HingeJointParameters {
          axis 1 0 0
          anchor 0.09 0 0.07
        }
        device [ RotationalMotor { name "rr_motor" } ]
        endPoint Solid {
          translation 0.09 0 0.07
          rotation 0 0 1 1.5708
          children [ USE WHEEL_SHAPE ]
          boundingObject USE WHEEL_SHAPE
          physics Physics { }
        }
      }
    ]

    # Fysieke eigenschappen voor het chassis
    boundingObject Box { size IS bodySize }
    physics Physics {
      density -1
      mass 1
    }
  }
}